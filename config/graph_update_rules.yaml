# 图更新规则配置

# 事件→关系增量规则
event_to_relation_rules:
  # 救助类事件
  "救下":
    - edge: ["施救者", "被救者", "恩情", 0.3]
    - edge: ["被救者", "施救者", "信任", 0.2]
  
  "帮助":
    - edge: ["帮助者", "被帮助者", "恩情", 0.2]
    - edge: ["被帮助者", "帮助者", "信任", 0.1]
  
  # 背叛类事件
  "背叛":
    - edge: ["背叛者", "被背叛者", "对立", 0.5]
    - clear: ["背叛者", "被背叛者", ["恩情", "信任"], 0.2]
  
  "欺骗":
    - edge: ["欺骗者", "被欺骗者", "对立", 0.3]
    - clear: ["欺骗者", "被欺骗者", ["信任"], 0.1]
  
  # 战斗类事件
  "击败":
    - edge: ["胜利者", "失败者", "压制", 0.4]
    - edge: ["失败者", "胜利者", "恐惧", 0.3]
  
  "杀死":
    - edge: ["杀人者", "被杀者", "仇恨", 0.8]
    - clear: ["杀人者", "被杀者", ["恩情", "信任", "同伴"], 0.0]

# 关系衰减规则
relation_decay:
  default_decay_rate: 0.9  # 每章衰减到90%
  persistent_relations: ["血缘", "师徒"]  # 不衰减的关系类型

# 属性变更约束
attribute_constraints:
  combat_power:
    - 仅在明确证据时变化
    - 允许值: ["弱", "中", "强", "未知"]
  
  inventory:
    - 依据"获得/丢失/移交"等事件同步
    - 自动去重
  
  traits:
    - 只有显著证据才新增
    - 从白名单中抽取
